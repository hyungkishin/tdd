# Test Double

- 스턴트맨 과 같이. 5가지 종류가 있다.
- Dummy
  - 실제객체를 모방한 동작, 행위도 않하는 객체이다. (활용할 일은 잘 없다.) 
- Fake
  - 실제객체를 모방한 동작 (단순한 형태로 동일한 기능은 수행하나, 프로덕션에서 쓰기에는 부족한 객체)
  - repository 가 제공하는 CRUD 를 모두 모방.
- Stub
  - 실제객체를 모방한 동작, 행위를 하는 객체이다. (프로덕션에서 쓰기에는 부족한 객체)
  - 테스트에서 요청한 것에 대해 미리 준비한 결과를 제공하는 객체
  - 그 외에는 응답하지 않는다.
- Spy
  - Stub 이면서 호출된 내용을 기록하여 보여줄 수 있는 객체
  - 일부는 실제 객체처럼 동작시키고 일부만 Stubbing 할 수 있다.
- Mock
  - 행위에 대한 기대를 명세하고, 그에 따라 동작하도록 만들어진 객체

- https://martinfowler.com/articles/mocksArentStubs.html
 

# Stub vs Mock

### Stub: 상태 검증 (State Verification)
- 테스트에서 요청한 것에 대해 미리 준비한 결과를 제공하는 객체 그 외에는 응답하지 않는다.
### Mock: 행위 검증 (Behavior Verification)
- 행위에 대한 기대를 명세하고, 그에 따라 동작하도록 만들어진 객체

완벽이해.

### Stub:
- 내가 영화를 연출하고 있고 특정 배우를 대신할 사람이 필요하다고 상상해보자.
- 스텁은 배우와 비슷하게 생겼고 동작을 흉내낼 수 있지만 어떻게 연기해야 하는지에 대한 구체적인 기대가 없는 사람을 고용하는 것과 같다.
- 스탠드 인은 단순히 그들에게 주어진 스크립트와 행동을 따른다.
- 장면에서 지시되거나 사용되는 방식을 추적하거나 확인하지 않는다.

### Mock 배우
- 반면에 mock 배우는 원작 배우를 닮았을 뿐만 아니라 감독의 구체적인 지시와 기대에 세심한 주의를 기울이는 배우를 고용하는 것과 같다.
- mock 배우는 감독이 제공한 대본, 동작 및 단서를 면밀히 따라 모든 것이 예상대로 실행되도록 한다.
- 장면이 촬영된 후 감독은 모의 배우가 지시 사항을 올바르게 따랐는지 확인할 수 있다.
